/// <reference path="node_modules/@types/jquery/index.d.ts" />
/// <reference path="node_modules/@types/lodash/index.d.ts" />
var Log = (function () {
    function Log() {
    }
    Log.out = function (msg) {
        this.state += msg + "\n";
        $("#pre").text(this.state);
    };
    return Log;
}());
Log.state = "";
var PuzzleDemo = (function () {
    function PuzzleDemo(solution) {
        this.solution = [];
        this.solution = solution;
        Log.out("Puzzle: " + solution.join(" "));
    }
    PuzzleDemo.random = function (length) {
        return new PuzzleDemo(_.shuffle(_.map(new Array(length), function (v, k) { return k + 1; })));
    };
    PuzzleDemo.prototype.getSlotCount = function () {
        return this.solution.length;
    };
    PuzzleDemo.prototype.test = function (board) {
        var correct = 0;
        for (var i = 0, len = this.solution.length; i < len; i++) {
            if (board.getSlot(i).quantity == this.solution[i]) {
                correct++;
            }
        }
        return correct;
    };
    return PuzzleDemo;
}());
var HumanPuzzleInterface = (function () {
    function HumanPuzzleInterface(slotCount) {
        this.slotCount;
    }
    HumanPuzzleInterface.prototype.getSlotCount = function () {
        return this.slotCount;
    };
    HumanPuzzleInterface.prototype.test = function (board) {
        var answer;
        do {
            answer = parseInt(prompt("Please try:\n\t" + board + "\n\nHow many are correct?"), 10);
        } while (!isNaN(answer));
        return answer;
    };
    return HumanPuzzleInterface;
}());
var Solver = (function () {
    function Solver(puzzle) {
        this.guesses = 0;
        this.puzzle = puzzle;
        // first guess
        this.board = new Board(_.map(new Array(this.puzzle.getSlotCount()), function (v, k) { return k + 1; }));
        // begin
        this.testGuess();
    }
    Solver.solve = function (puzzle) {
        return new Solver(puzzle);
    };
    Solver.prototype.testGuess = function () {
        var _this = this;
        this.guesses++;
        var correct = this.puzzle.test(this.board);
        var delta = correct - this.lastCorrect || 0;
        Log.out(correct + " (" + (delta < 0 ? delta : "+" + delta) + ")  " + this.board);
        this.board.render();
        if (correct == this.puzzle.getSlotCount()) {
            Log.out("You win in " + this.guesses + " guesses.");
            return;
        }
        var twoMaybes = false;
        // try again
        var previous = this.board.getMove(-1);
        if (null != previous) {
            if (delta == 0) {
                // no difference; both are wrong
                this.board.setDeduction("NO", "NO");
                // TRICKY: if previous swap was MAYBE, MAYBE deduce remaining MAYBE => YES
                this.board.setRemainderDeduction("MAYBE", "MAYBE", "YES");
            }
            else if (delta == 1) {
                // if either of these MAYBEs has ever been NO before, then the other is YES now
                if (this.board.hadDeductionAtIndex(previous.after.a, "NO")) {
                    this.board.getSlot(previous.after.a.index).setDeduction("YES");
                    this.board.getSlot(previous.after.b.index).setDeduction("NO");
                }
                else if (this.board.hadDeductionAtIndex(previous.after.b, "NO")) {
                    this.board.getSlot(previous.after.b.index).setDeduction("YES");
                    this.board.getSlot(previous.after.a.index).setDeduction("NO");
                }
                else {
                    // difference; one is now right, but we don't know which
                    // unless we have history to narrow it, then we have specific match
                    this.board.setDeduction("MAYBE", "MAYBE");
                    twoMaybes = true;
                }
            }
            else if (delta == 2) {
                // very positive difference; both are now right for sure
                this.board.setDeduction("YES", "YES");
                // if last two were also maybes, then the third is YES
            }
            else if (delta == -1) {
                // difference; one was right, but we don't know which
                // TRICKY: if swap MAYBE, NO = -1 then REVERSE and deduce MAYBE => YES
                // if previously MAYBE, MAYBE, but now -1, then a is YES
                if (previous.after.a.deduction == "MAYBE" && previous.after.b.deduction == "MAYBE") {
                    this.board.getSlot(previous.after.a.index);
                }
                this.board.unswap();
                correct = this.lastCorrect;
                this.board.setDeduction("MAYBE", "MAYBE");
                twoMaybes = true;
                this.board.setRemainderDeduction("MAYBE", "MAYBE", "YES");
            }
            else if (delta == -2) {
                // difference; both were right for sure
                this.board.unswap();
                correct = this.lastCorrect;
                this.board.setDeduction("YES", "YES");
                // if last two were also maybes, then the third is YES
            }
        }
        // swap next pair
        var candidates = [];
        var priorityCandidates = [];
        if (twoMaybes) {
            // a MAYBE, MAYBE result should always be followed by 
            // a swap containing a) one of the original maybes, and b) one new maybe
            priorityCandidates.push(this.board.getMove(-1).after.a.index);
        }
        for (var i = 0, len = this.puzzle.getSlotCount(); i < len; i++) {
            //console.log("candidate ", { i: i, d: this.board.getSlot(i).deduction });
            if ("YES" != this.board.getSlot(i).deduction && priorityCandidates[0] != i) {
                candidates.push(i);
            }
        }
        if (candidates.length < 2) {
            Log.out("Only one unknown remains yet puzzle isn't solved? Impossible!");
            console.log(candidates);
            return;
        }
        candidates = _.shuffle(candidates).concat(priorityCandidates);
        this.board.swap(candidates.pop(), candidates.pop());
        this.lastCorrect = correct;
        setTimeout(function () { return _this.testGuess(); }, GUESS_DELAY);
    };
    return Solver;
}());
var Slot = (function () {
    function Slot() {
    }
    Slot.prototype.setDeduction = function (deduction) {
        this.deduction = deduction;
        Log.out("          " + this.quantity + " " + this.deduction[0] + " => " + deduction[0]);
    };
    Slot.prototype.toString = function () {
        return this.quantity;
    };
    return Slot;
}());
var Pair = (function () {
    function Pair() {
    }
    Pair.prototype.matchesDeductions = function (a, b) {
        return this.a.deduction == a && this.b.deduction == b;
    };
    return Pair;
}());
var Move = (function () {
    function Move() {
    }
    return Move;
}());
var Board = (function () {
    function Board(quantities) {
        this.board = [];
        this.history = []; // history of moves
        for (var i = 0, len = quantities.length; i < len; i++) {
            var slot = new Slot();
            slot.index = i;
            slot.symbol = Board.symbols.substr(i, 1);
            slot.quantity = quantities[i];
            slot.deduction = "UNKNOWN";
            this.board.push(slot);
        }
    }
    Board.prototype.swap = function (a, b) {
        // record before
        var move = new Move();
        var pairBefore = new Pair();
        pairBefore.a = _.clone(this.board[a]);
        pairBefore.b = _.clone(this.board[b]);
        move.before = pairBefore;
        // move
        Log.out("          " + this.board[a].quantity + " <> " + this.board[b].quantity);
        var c = this.board[a];
        this.board[a] = this.board[b];
        this.board[b] = c;
        this.board[a].index = b;
        this.board[b].index = a;
        // record after
        var pairAfter = new Pair();
        pairAfter.a = this.board[a];
        pairAfter.b = this.board[b];
        move.after = pairAfter;
        this.history.push(move);
    };
    // determine whether a quantity has ever had a given deduction at a specific index in entire history
    Board.prototype.hadDeductionAtIndex = function (slot, deduction) {
        for (var i = 0, len = this.history.length; i < len; i++) {
            var pair = this.history[i].after;
            if ((pair.a.quantity == slot.quantity &&
                pair.a.deduction == deduction &&
                pair.a.index == slot.index) ||
                (pair.b.quantity == slot.quantity &&
                    pair.b.deduction == deduction &&
                    pair.b.index == slot.index)) {
                return true;
            }
        }
        return false;
    };
    Board.prototype.setRemainderDeduction = function (a, b, c) {
        var previous = this.getMove(-1);
        if (previous.before.matchesDeductions(a, b)) {
            var slot = this.getSlot(previous.before.a.index);
            slot.setDeduction(c);
        }
    };
    Board.prototype.setDeduction = function (a, b) {
        var lastPair = this.history[this.history.length - 1].after;
        lastPair.a.setDeduction(a);
        lastPair.b.setDeduction(b);
    };
    Board.prototype.unswap = function () {
        var lastPair = this.history[this.history.length - 1].after;
        this.swap(lastPair.a.index, lastPair.b.index);
        Log.out("        " + this);
    };
    Board.prototype.toString = function () {
        return this.board.join(" ");
    };
    Board.prototype.getMove = function (delta) {
        return this.history[this.history.length + delta];
    };
    Board.prototype.getSlot = function (index) {
        return this.board[index];
    };
    Board.prototype.render = function () {
        for (var i = 0, len = this.board.length; i < len; i++) {
            var slot = this.getSlot(i);
            $("td#c" + i).text(slot.quantity + " " + slot.deduction[0]);
        }
    };
    return Board;
}());
Board.symbols = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var GUESS_DELAY = 250; // ms
var SLOT_COUNT = 6;
//let puzzle = PuzzleDemo.random(SLOT_COUNT);
var puzzle = new PuzzleDemo([2, 3, 4, 1, 6, 5]);
//let human = new HumanPuzzleInterface(SLOT_COUNT);
Solver.solve(puzzle);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0aGV1cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1ldGhldXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsOERBQThEO0FBQzlELDhEQUE4RDtBQUU5RDtJQUFBO0lBTUEsQ0FBQztJQUpjLE9BQUcsR0FBakIsVUFBa0IsR0FBVztRQUM1QixJQUFJLENBQUMsS0FBSyxJQUFPLEdBQUcsT0FBSSxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDRixVQUFDO0FBQUQsQ0FBQyxBQU5EO0FBQ2dCLFNBQUssR0FBRyxFQUFFLENBQUM7QUFZM0I7SUFHQyxvQkFBbUIsUUFBa0I7UUFGN0IsYUFBUSxHQUFhLEVBQUUsQ0FBQztRQUcvQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixHQUFHLENBQUMsR0FBRyxDQUFDLGFBQVcsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUcsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFYSxpQkFBTSxHQUFwQixVQUFxQixNQUFjO1FBQ2xDLE1BQU0sQ0FBQyxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQ3BDLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRU0saUNBQVksR0FBbkI7UUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDN0IsQ0FBQztJQUVNLHlCQUFJLEdBQVgsVUFBWSxLQUFZO1FBQ3ZCLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQztRQUNoQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxD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SSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDdkQsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzQixDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0QsQ0FBQztJQUNGLENBQUM7SUFDRixZQUFDO0FBQUQsQ0FBQyxBQWhHRDtBQUNnQixhQUFPLEdBQUcsNEJBQTRCLENBQUM7QUFrR3ZELElBQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUs7QUFDOUIsSUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLDZDQUE2QztBQUM3QyxJQUFJLE1BQU0sR0FBRyxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRCxtREFBbUQ7QUFDbkQsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJub2RlX21vZHVsZXMvQHR5cGVzL2pxdWVyeS9pbmRleC5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIm5vZGVfbW9kdWxlcy9AdHlwZXMvbG9kYXNoL2luZGV4LmQudHNcIiAvPlxyXG5cclxuY2xhc3MgTG9nIHtcclxuXHRwcml2YXRlIHN0YXRpYyBzdGF0ZSA9IFwiXCI7XHJcblx0cHVibGljIHN0YXRpYyBvdXQobXNnOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMuc3RhdGUgKz0gYCR7bXNnfVxcbmA7XHJcblx0XHQkKFwiI3ByZVwiKS50ZXh0KHRoaXMuc3RhdGUpO1xyXG5cdH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFB1enpsZSB7XHJcblx0dGVzdChib2FyZDogQm9hcmQpOiBudW1iZXI7XHJcblx0Z2V0U2xvdENvdW50KCk6IG51bWJlcjtcclxufVxyXG5cclxuY2xhc3MgUHV6emxlRGVtbyBpbXBsZW1lbnRzIFB1enpsZSB7XHJcblx0cHJpdmF0ZSBzb2x1dGlvbjogbnVtYmVyW10gPSBbXTtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKHNvbHV0aW9uOiBudW1iZXJbXSkge1xyXG5cdFx0dGhpcy5zb2x1dGlvbiA9IHNvbHV0aW9uO1xyXG5cdFx0TG9nLm91dChgUHV6emxlOiAke3NvbHV0aW9uLmpvaW4oXCIgXCIpfWApO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyByYW5kb20obGVuZ3RoOiBudW1iZXIpOiBQdXp6bGUge1xyXG5cdFx0cmV0dXJuIG5ldyBQdXp6bGVEZW1vKF8uc2h1ZmZsZShfLm1hcChcclxuXHRcdFx0bmV3IEFycmF5KGxlbmd0aCksIGZ1bmN0aW9uICh2LCBrKSB7IHJldHVybiBrICsgMTsgfSkpKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRTbG90Q291bnQoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLnNvbHV0aW9uLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyB0ZXN0KGJvYXJkOiBCb2FyZCk6IG51bWJlciB7XHJcblx0XHRsZXQgY29ycmVjdCA9IDA7XHJcblx0XHRmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5zb2x1dGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG5cdFx0XHRpZiAoYm9hcmQuZ2V0U2xvdChpKS5xdWFudGl0eSA9PSB0aGlzLnNvbHV0aW9uW2ldKSB7XHJcblx0XHRcdFx0Y29ycmVjdCsrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY29ycmVjdDtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEh1bWFuUHV6emxlSW50ZXJmYWNlIGltcGxlbWVudHMgUHV6emxlIHtcclxuXHRwcml2YXRlIHNsb3RDb3VudDogbnVtYmVyO1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3Ioc2xvdENvdW50OiBudW1iZXIpIHtcclxuXHRcdHRoaXMuc2xvdENvdW50O1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldFNsb3RDb3VudCgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2xvdENvdW50O1xyXG5cdH1cclxuXHJcblx0cHVibGljIHRlc3QoYm9hcmQ6IEJvYXJkKTogbnVtYmVyIHtcclxuXHRcdGxldCBhbnN3ZXI7XHJcblx0XHRkbyB7XHJcblx0XHRcdGFuc3dlciA9IHBhcnNlSW50KHByb21wdChcclxuXHRcdFx0XHRgUGxlYXNlIHRyeTpcXG5cXHQke2JvYXJkfVxcblxcbkhvdyBtYW55IGFyZSBjb3JyZWN0P2ApLCAxMCk7XHJcblx0XHR9XHJcblx0XHR3aGlsZSAoIWlzTmFOKGFuc3dlcikpO1xyXG5cdFx0cmV0dXJuIGFuc3dlcjtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFNvbHZlciB7XHJcblx0cHJpdmF0ZSBwdXp6bGU6IFB1enpsZTtcclxuXHRwcml2YXRlIGJvYXJkOiBCb2FyZDtcclxuXHRwcml2YXRlIGxhc3RDb3JyZWN0OiBudW1iZXI7XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihwdXp6bGU6IFB1enpsZSkge1xyXG5cdFx0dGhpcy5wdXp6bGUgPSBwdXp6bGU7XHJcblxyXG5cdFx0Ly8gZmlyc3QgZ3Vlc3NcclxuXHRcdHRoaXMuYm9hcmQgPSBuZXcgQm9hcmQoXy5tYXAobmV3IEFycmF5KHRoaXMucHV6emxlLmdldFNsb3RDb3VudCgpKSxcclxuXHRcdFx0ZnVuY3Rpb24gKHYsIGspIHsgcmV0dXJuIGsgKyAxOyB9KSk7XHJcblxyXG5cdFx0Ly8gYmVnaW5cclxuXHRcdHRoaXMudGVzdEd1ZXNzKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIHNvbHZlKHB1enpsZTogUHV6emxlKSB7XHJcblx0XHRyZXR1cm4gbmV3IFNvbHZlcihwdXp6bGUpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBndWVzc2VzID0gMDtcclxuXHRwdWJsaWMgdGVzdEd1ZXNzKCkge1xyXG5cdFx0dGhpcy5ndWVzc2VzKys7XHJcblx0XHRsZXQgY29ycmVjdCA9IHRoaXMucHV6emxlLnRlc3QodGhpcy5ib2FyZCk7XHJcblx0XHRsZXQgZGVsdGEgPSBjb3JyZWN0IC0gdGhpcy5sYXN0Q29ycmVjdCB8fCAwO1xyXG5cdFx0TG9nLm91dChgJHtjb3JyZWN0fSAoJHtkZWx0YSA8IDAgPyBkZWx0YSA6IGArJHtkZWx0YX1gfSkgICR7dGhpcy5ib2FyZH1gKTtcclxuXHRcdHRoaXMuYm9hcmQucmVuZGVyKCk7XHJcblx0XHRpZiAoY29ycmVjdCA9PSB0aGlzLnB1enpsZS5nZXRTbG90Q291bnQoKSkge1xyXG5cdFx0XHRMb2cub3V0KGBZb3Ugd2luIGluICR7dGhpcy5ndWVzc2VzfSBndWVzc2VzLmApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHR3b01heWJlcyA9IGZhbHNlO1xyXG5cdFx0Ly8gdHJ5IGFnYWluXHJcblx0XHRsZXQgcHJldmlvdXMgPSB0aGlzLmJvYXJkLmdldE1vdmUoLTEpO1xyXG5cdFx0aWYgKG51bGwgIT0gcHJldmlvdXMpIHtcclxuXHRcdFx0aWYgKGRlbHRhID09IDApIHtcclxuXHRcdFx0XHQvLyBubyBkaWZmZXJlbmNlOyBib3RoIGFyZSB3cm9uZ1xyXG5cdFx0XHRcdHRoaXMuYm9hcmQuc2V0RGVkdWN0aW9uKFwiTk9cIiwgXCJOT1wiKTtcclxuXHJcblx0XHRcdFx0Ly8gVFJJQ0tZOiBpZiBwcmV2aW91cyBzd2FwIHdhcyBNQVlCRSwgTUFZQkUgZGVkdWNlIHJlbWFpbmluZyBNQVlCRSA9PiBZRVNcclxuXHRcdFx0XHR0aGlzLmJvYXJkLnNldFJlbWFpbmRlckRlZHVjdGlvbihcIk1BWUJFXCIsIFwiTUFZQkVcIiwgXCJZRVNcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoZGVsdGEgPT0gMSkge1xyXG5cdFx0XHRcdC8vIGlmIGVpdGhlciBvZiB0aGVzZSBNQVlCRXMgaGFzIGV2ZXIgYmVlbiBOTyBiZWZvcmUsIHRoZW4gdGhlIG90aGVyIGlzIFlFUyBub3dcclxuXHRcdFx0XHRpZiAodGhpcy5ib2FyZC5oYWREZWR1Y3Rpb25BdEluZGV4KHByZXZpb3VzLmFmdGVyLmEsIFwiTk9cIikpIHtcclxuXHRcdFx0XHRcdHRoaXMuYm9hcmQuZ2V0U2xvdChwcmV2aW91cy5hZnRlci5hLmluZGV4KS5zZXREZWR1Y3Rpb24oXCJZRVNcIik7XHJcblx0XHRcdFx0XHR0aGlzLmJvYXJkLmdldFNsb3QocHJldmlvdXMuYWZ0ZXIuYi5pbmRleCkuc2V0RGVkdWN0aW9uKFwiTk9cIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKHRoaXMuYm9hcmQuaGFkRGVkdWN0aW9uQXRJbmRleChwcmV2aW91cy5hZnRlci5iLCBcIk5PXCIpKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJvYXJkLmdldFNsb3QocHJldmlvdXMuYWZ0ZXIuYi5pbmRleCkuc2V0RGVkdWN0aW9uKFwiWUVTXCIpO1xyXG5cdFx0XHRcdFx0dGhpcy5ib2FyZC5nZXRTbG90KHByZXZpb3VzLmFmdGVyLmEuaW5kZXgpLnNldERlZHVjdGlvbihcIk5PXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdC8vIGRpZmZlcmVuY2U7IG9uZSBpcyBub3cgcmlnaHQsIGJ1dCB3ZSBkb24ndCBrbm93IHdoaWNoXHJcblx0XHRcdFx0XHQvLyB1bmxlc3Mgd2UgaGF2ZSBoaXN0b3J5IHRvIG5hcnJvdyBpdCwgdGhlbiB3ZSBoYXZlIHNwZWNpZmljIG1hdGNoXHJcblx0XHRcdFx0XHR0aGlzLmJvYXJkLnNldERlZHVjdGlvbihcIk1BWUJFXCIsIFwiTUFZQkVcIik7XHJcblx0XHRcdFx0XHR0d29NYXliZXMgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChkZWx0YSA9PSAyKSB7XHJcblx0XHRcdFx0Ly8gdmVyeSBwb3NpdGl2ZSBkaWZmZXJlbmNlOyBib3RoIGFyZSBub3cgcmlnaHQgZm9yIHN1cmVcclxuXHRcdFx0XHR0aGlzLmJvYXJkLnNldERlZHVjdGlvbihcIllFU1wiLCBcIllFU1wiKTtcclxuXHJcblx0XHRcdFx0Ly8gaWYgbGFzdCB0d28gd2VyZSBhbHNvIG1heWJlcywgdGhlbiB0aGUgdGhpcmQgaXMgWUVTXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoZGVsdGEgPT0gLTEpIHtcclxuXHRcdFx0XHQvLyBkaWZmZXJlbmNlOyBvbmUgd2FzIHJpZ2h0LCBidXQgd2UgZG9uJ3Qga25vdyB3aGljaFxyXG5cclxuXHRcdFx0XHQvLyBUUklDS1k6IGlmIHN3YXAgTUFZQkUsIE5PID0gLTEgdGhlbiBSRVZFUlNFIGFuZCBkZWR1Y2UgTUFZQkUgPT4gWUVTXHJcblxyXG5cdFx0XHRcdC8vIGlmIHByZXZpb3VzbHkgTUFZQkUsIE1BWUJFLCBidXQgbm93IC0xLCB0aGVuIGEgaXMgWUVTXHJcblx0XHRcdFx0aWYgKHByZXZpb3VzLmFmdGVyLmEuZGVkdWN0aW9uID09IFwiTUFZQkVcIiAmJiBwcmV2aW91cy5hZnRlci5iLmRlZHVjdGlvbiA9PSBcIk1BWUJFXCIpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGhpcy5ib2FyZC5nZXRTbG90KHByZXZpb3VzLmFmdGVyLmEuaW5kZXgpXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLmJvYXJkLnVuc3dhcCgpO1xyXG5cdFx0XHRcdGNvcnJlY3QgPSB0aGlzLmxhc3RDb3JyZWN0O1xyXG5cdFx0XHRcdHRoaXMuYm9hcmQuc2V0RGVkdWN0aW9uKFwiTUFZQkVcIiwgXCJNQVlCRVwiKTtcclxuXHRcdFx0XHR0d29NYXliZXMgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHR0aGlzLmJvYXJkLnNldFJlbWFpbmRlckRlZHVjdGlvbihcIk1BWUJFXCIsIFwiTUFZQkVcIiwgXCJZRVNcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoZGVsdGEgPT0gLTIpIHtcclxuXHRcdFx0XHQvLyBkaWZmZXJlbmNlOyBib3RoIHdlcmUgcmlnaHQgZm9yIHN1cmVcclxuXHRcdFx0XHR0aGlzLmJvYXJkLnVuc3dhcCgpO1xyXG5cdFx0XHRcdGNvcnJlY3QgPSB0aGlzLmxhc3RDb3JyZWN0O1xyXG5cdFx0XHRcdHRoaXMuYm9hcmQuc2V0RGVkdWN0aW9uKFwiWUVTXCIsIFwiWUVTXCIpO1xyXG5cdFx0XHRcdC8vIGlmIGxhc3QgdHdvIHdlcmUgYWxzbyBtYXliZXMsIHRoZW4gdGhlIHRoaXJkIGlzIFlFU1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBzd2FwIG5leHQgcGFpclxyXG5cdFx0bGV0IGNhbmRpZGF0ZXM6IG51bWJlcltdID0gW107XHJcblx0XHRsZXQgcHJpb3JpdHlDYW5kaWRhdGVzID0gW107XHJcblx0XHRpZiAodHdvTWF5YmVzKSB7XHJcblx0XHRcdC8vIGEgTUFZQkUsIE1BWUJFIHJlc3VsdCBzaG91bGQgYWx3YXlzIGJlIGZvbGxvd2VkIGJ5IFxyXG5cdFx0XHQvLyBhIHN3YXAgY29udGFpbmluZyBhKSBvbmUgb2YgdGhlIG9yaWdpbmFsIG1heWJlcywgYW5kIGIpIG9uZSBuZXcgbWF5YmVcclxuXHRcdFx0cHJpb3JpdHlDYW5kaWRhdGVzLnB1c2godGhpcy5ib2FyZC5nZXRNb3ZlKC0xKS5hZnRlci5hLmluZGV4KTtcclxuXHRcdH1cclxuXHRcdGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLnB1enpsZS5nZXRTbG90Q291bnQoKTsgaSA8IGxlbjsgaSsrKSB7XHJcblx0XHRcdC8vY29uc29sZS5sb2coXCJjYW5kaWRhdGUgXCIsIHsgaTogaSwgZDogdGhpcy5ib2FyZC5nZXRTbG90KGkpLmRlZHVjdGlvbiB9KTtcclxuXHRcdFx0aWYgKFwiWUVTXCIgIT0gdGhpcy5ib2FyZC5nZXRTbG90KGkpLmRlZHVjdGlvbiAmJiBwcmlvcml0eUNhbmRpZGF0ZXNbMF0gIT0gaSkge1xyXG5cdFx0XHRcdGNhbmRpZGF0ZXMucHVzaChpKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKGNhbmRpZGF0ZXMubGVuZ3RoIDwgMikge1xyXG5cdFx0XHRMb2cub3V0KFwiT25seSBvbmUgdW5rbm93biByZW1haW5zIHlldCBwdXp6bGUgaXNuJ3Qgc29sdmVkPyBJbXBvc3NpYmxlIVwiKTtcclxuXHRcdFx0Y29uc29sZS5sb2coY2FuZGlkYXRlcyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGNhbmRpZGF0ZXMgPSBfLnNodWZmbGUoY2FuZGlkYXRlcykuY29uY2F0KHByaW9yaXR5Q2FuZGlkYXRlcyk7XHJcblx0XHR0aGlzLmJvYXJkLnN3YXAoY2FuZGlkYXRlcy5wb3AoKSwgY2FuZGlkYXRlcy5wb3AoKSk7XHJcblxyXG5cdFx0dGhpcy5sYXN0Q29ycmVjdCA9IGNvcnJlY3Q7XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMudGVzdEd1ZXNzKCksIEdVRVNTX0RFTEFZKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5cclxuLy8gaGlzdG9yeTogTW92ZTogUGFpcjogU2xvdFxyXG5cclxudHlwZSBEZWR1Y3Rpb24gPSBcIlVOS05PV05cIiB8IFwiTk9cIiB8IFwiTUFZQkVcIiB8IFwiWUVTXCI7XHJcblxyXG5jbGFzcyBTbG90IHtcclxuXHRpbmRleDogbnVtYmVyO1xyXG5cdHN5bWJvbDogc3RyaW5nO1xyXG5cdHF1YW50aXR5OiBudW1iZXI7XHJcblx0ZGVkdWN0aW9uOiBEZWR1Y3Rpb247XHJcblx0cmVtYWluZGVyOiBTbG90O1xyXG5cclxuXHRwdWJsaWMgc2V0RGVkdWN0aW9uKGRlZHVjdGlvbjogRGVkdWN0aW9uKVxyXG5cdHtcclxuXHRcdHRoaXMuZGVkdWN0aW9uID0gZGVkdWN0aW9uO1xyXG5cdFx0TG9nLm91dChgICAgICAgICAgICR7dGhpcy5xdWFudGl0eX0gJHt0aGlzLmRlZHVjdGlvblswXX0gPT4gJHtkZWR1Y3Rpb25bMF19YCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdG9TdHJpbmcoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5xdWFudGl0eTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFBhaXIge1xyXG5cdHB1YmxpYyBhOiBTbG90O1xyXG5cdHB1YmxpYyBiOiBTbG90O1xyXG5cclxuXHRwdWJsaWMgbWF0Y2hlc0RlZHVjdGlvbnMoYTogRGVkdWN0aW9uLCBiOiBEZWR1Y3Rpb24pOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmEuZGVkdWN0aW9uID09IGEgJiYgdGhpcy5iLmRlZHVjdGlvbiA9PSBiO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgTW92ZSB7XHJcblx0YmVmb3JlOiBQYWlyO1xyXG5cdGFmdGVyOiBQYWlyO1xyXG59XHJcblxyXG5jbGFzcyBCb2FyZCB7XHJcblx0cHJpdmF0ZSBzdGF0aWMgc3ltYm9scyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIjtcclxuXHRwcml2YXRlIGJvYXJkOiBTbG90W10gPSBbXTtcclxuXHRwcml2YXRlIGhpc3Rvcnk6IE1vdmVbXSA9IFtdOyAvLyBoaXN0b3J5IG9mIG1vdmVzXHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihxdWFudGl0aWVzOiBudW1iZXJbXSkge1xyXG5cdFx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IHF1YW50aXRpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuXHRcdFx0bGV0IHNsb3QgPSBuZXcgU2xvdCgpO1xyXG5cdFx0XHRzbG90LmluZGV4ID0gaTtcclxuXHRcdFx0c2xvdC5zeW1ib2wgPSBCb2FyZC5zeW1ib2xzLnN1YnN0cihpLCAxKTtcclxuXHRcdFx0c2xvdC5xdWFudGl0eSA9IHF1YW50aXRpZXNbaV07XHJcblx0XHRcdHNsb3QuZGVkdWN0aW9uID0gXCJVTktOT1dOXCI7XHJcblx0XHRcdHRoaXMuYm9hcmQucHVzaChzbG90KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzd2FwKGE6IG51bWJlciwgYjogbnVtYmVyKSB7XHJcblx0XHQvLyByZWNvcmQgYmVmb3JlXHJcblx0XHRsZXQgbW92ZSA9IG5ldyBNb3ZlKCk7XHJcblx0XHRsZXQgcGFpckJlZm9yZSA9IG5ldyBQYWlyKCk7XHJcblx0XHRwYWlyQmVmb3JlLmEgPSBfLmNsb25lKHRoaXMuYm9hcmRbYV0pO1xyXG5cdFx0cGFpckJlZm9yZS5iID0gXy5jbG9uZSh0aGlzLmJvYXJkW2JdKTtcclxuXHRcdG1vdmUuYmVmb3JlID0gcGFpckJlZm9yZTtcclxuXHJcblx0XHQvLyBtb3ZlXHJcblx0XHRMb2cub3V0KGAgICAgICAgICAgJHt0aGlzLmJvYXJkW2FdLnF1YW50aXR5fSA8PiAke3RoaXMuYm9hcmRbYl0ucXVhbnRpdHl9YCk7XHJcblx0XHRsZXQgYyA9IHRoaXMuYm9hcmRbYV07XHJcblx0XHR0aGlzLmJvYXJkW2FdID0gdGhpcy5ib2FyZFtiXTtcclxuXHRcdHRoaXMuYm9hcmRbYl0gPSBjO1xyXG5cdFx0dGhpcy5ib2FyZFthXS5pbmRleCA9IGI7XHJcblx0XHR0aGlzLmJvYXJkW2JdLmluZGV4ID0gYTtcclxuXHJcblx0XHQvLyByZWNvcmQgYWZ0ZXJcclxuXHRcdGxldCBwYWlyQWZ0ZXIgPSBuZXcgUGFpcigpO1xyXG5cdFx0cGFpckFmdGVyLmEgPSB0aGlzLmJvYXJkW2FdO1xyXG5cdFx0cGFpckFmdGVyLmIgPSB0aGlzLmJvYXJkW2JdO1xyXG5cdFx0bW92ZS5hZnRlciA9IHBhaXJBZnRlcjtcclxuXHRcdHRoaXMuaGlzdG9yeS5wdXNoKG1vdmUpO1xyXG5cdH1cclxuXHJcblx0Ly8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBxdWFudGl0eSBoYXMgZXZlciBoYWQgYSBnaXZlbiBkZWR1Y3Rpb24gYXQgYSBzcGVjaWZpYyBpbmRleCBpbiBlbnRpcmUgaGlzdG9yeVxyXG5cdHB1YmxpYyBoYWREZWR1Y3Rpb25BdEluZGV4KHNsb3Q6IFNsb3QsIGRlZHVjdGlvbjogRGVkdWN0aW9uKTogYm9vbGVhbiB7XHJcblx0XHRmb3IgKGxldCBpPTAsbGVuPXRoaXMuaGlzdG9yeS5sZW5ndGg7IGk8bGVuOyBpKyspIHtcclxuXHRcdFx0bGV0IHBhaXIgPSB0aGlzLmhpc3RvcnlbaV0uYWZ0ZXI7XHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHQocGFpci5hLnF1YW50aXR5ID09IHNsb3QucXVhbnRpdHkgJiYgXHJcblx0XHRcdFx0IHBhaXIuYS5kZWR1Y3Rpb24gPT0gZGVkdWN0aW9uICYmIFxyXG5cdFx0XHRcdCBwYWlyLmEuaW5kZXggPT0gc2xvdC5pbmRleCkgfHxcclxuXHRcdFx0XHQocGFpci5iLnF1YW50aXR5ID09IHNsb3QucXVhbnRpdHkgJiYgXHJcblx0XHRcdFx0IHBhaXIuYi5kZWR1Y3Rpb24gPT0gZGVkdWN0aW9uICYmIFxyXG5cdFx0XHRcdCBwYWlyLmIuaW5kZXggPT0gc2xvdC5pbmRleClcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRSZW1haW5kZXJEZWR1Y3Rpb24oYTogRGVkdWN0aW9uLCBiOiBEZWR1Y3Rpb24sIGM6IERlZHVjdGlvbikge1xyXG5cdFx0bGV0IHByZXZpb3VzID0gdGhpcy5nZXRNb3ZlKC0xKTtcclxuXHRcdGlmIChwcmV2aW91cy5iZWZvcmUubWF0Y2hlc0RlZHVjdGlvbnMoYSwgYikpIHtcclxuXHRcdFx0bGV0IHNsb3QgPSB0aGlzLmdldFNsb3QocHJldmlvdXMuYmVmb3JlLmEuaW5kZXgpO1xyXG5cdFx0XHRzbG90LnNldERlZHVjdGlvbihjKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXREZWR1Y3Rpb24oYTogRGVkdWN0aW9uLCBiOiBEZWR1Y3Rpb24pIHtcclxuXHRcdGxldCBsYXN0UGFpciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMV0uYWZ0ZXI7XHJcblx0XHRsYXN0UGFpci5hLnNldERlZHVjdGlvbihhKTtcclxuXHRcdGxhc3RQYWlyLmIuc2V0RGVkdWN0aW9uKGIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHVuc3dhcCgpIHtcclxuXHRcdGxldCBsYXN0UGFpciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMV0uYWZ0ZXI7XHJcblx0XHR0aGlzLnN3YXAobGFzdFBhaXIuYS5pbmRleCwgbGFzdFBhaXIuYi5pbmRleCk7XHJcblx0XHRMb2cub3V0KGAgICAgICAgICR7dGhpc31gKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm9hcmQuam9pbihcIiBcIik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0TW92ZShkZWx0YTogbnVtYmVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggKyBkZWx0YV07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0U2xvdChpbmRleDogbnVtYmVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5ib2FyZFtpbmRleF07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVuZGVyKCkge1xyXG5cdFx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMuYm9hcmQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuXHRcdFx0bGV0IHNsb3QgPSB0aGlzLmdldFNsb3QoaSk7XHJcblx0XHRcdCQoXCJ0ZCNjXCIgKyBpKS50ZXh0KHNsb3QucXVhbnRpdHkgKyBcIiBcIiArIHNsb3QuZGVkdWN0aW9uWzBdKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG5jb25zdCBHVUVTU19ERUxBWSA9IDI1MDsgLy8gbXNcclxuY29uc3QgU0xPVF9DT1VOVCA9IDY7XHJcbi8vbGV0IHB1enpsZSA9IFB1enpsZURlbW8ucmFuZG9tKFNMT1RfQ09VTlQpO1xyXG5sZXQgcHV6emxlID0gbmV3IFB1enpsZURlbW8oWzIsIDMsIDQsIDEsIDYsIDVdKTtcclxuLy9sZXQgaHVtYW4gPSBuZXcgSHVtYW5QdXp6bGVJbnRlcmZhY2UoU0xPVF9DT1VOVCk7XHJcblNvbHZlci5zb2x2ZShwdXp6bGUpOyJdfQ==